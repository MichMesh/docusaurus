"use strict";(globalThis.webpackChunkmichmesh=globalThis.webpackChunkmichmesh||[]).push([[957],{7677:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Reticulum/RNode","title":"How to setup an RNode from the CLI","description":"This assumes that you have already have a running RNS instance in a python venv running under ~/reticulum/.","source":"@site/docs/04-Reticulum/02-RNode.md","sourceDirName":"04-Reticulum","slug":"/Reticulum/RNode","permalink":"/docs/Reticulum/RNode","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_label":"RNode"},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/docs/Reticulum/Getting_Started"},"next":{"title":"Common Services","permalink":"/docs/Reticulum/Services"}}');var o=t(4848),r=t(8453);const s={sidebar_label:"RNode",description:void 0},l="How to setup an RNode from the CLI",c={},d=[];function a(e){const n={code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"How-to-setup-an-RNode-from-the-CLI",children:"How to setup an RNode from the CLI"})}),"\n",(0,o.jsxs)(n.p,{children:["This assumes that you have already have a running RNS instance in a python venv running under ",(0,o.jsx)(n.code,{children:"~/reticulum/"}),"."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Connect a supported ESP32 node, in my example I will be using a Heltec V4. Make sure to use a data cable and not a charging cable."}),"\n",(0,o.jsxs)(n.li,{children:["Load your python venv. ",(0,o.jsx)(n.code,{children:". ~/reticulum/bin/activate"})]}),"\n",(0,o.jsxs)(n.li,{children:["Run ",(0,o.jsx)(n.code,{children:"rnodeconf --autoinstall"})]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"It will ask if your node is connceted. Hit enter when it is."}),"\n",(0,o.jsx)(n.li,{children:"It will now ask which device you want to install to, I am installing to #1:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Hello!\n\nThis guide will help you install the RNode firmware on supported\nand homebrew devices. Please connect the device you wish to set\nup now. Hit enter when it is connected.\n\nDetected serial ports:\n  [1] /dev/ttyACM0 (USB JTAG/serial debug unit, 90:70:69:85:4D:64)\n\nEnter the number of the serial port your device is connected to:\n? 1\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["It will then probe the device to figure out what it is. I am selecting ",(0,o.jsx)(n.code,{children:"9"})," for Heltec V4."]}),"\n",(0,o.jsx)(n.li,{children:"It might tell you that Heltec is experimental. If so, hit enter."}),"\n",(0,o.jsxs)(n.li,{children:["It will now ask what frequency this device is designed for. Since I am in the USA, I am choosing ",(0,o.jsx)(n.code,{children:"2"}),", 915mHz."]}),"\n",(0,o.jsx)(n.li,{children:"It will now ask you to verify the info from prev steps before writing the firmware. If it's right, input y, then enter."}),"\n",(0,o.jsx)(n.li,{children:"It will now download and write the latest firmware and do all prep work needed to use it."}),"\n",(0,o.jsx)(n.li,{children:"The scripted shutdown may error out, if so, hit the reset button and check the screen."}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"WiFi (optional)"}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["We can now tell it to connect to our WiFi. ",(0,o.jsx)(n.code,{children:"rnodeconf /dev/ttyACM0 -w --wifi-mode sta --ssid MyWiFi --psk ontheceiling"})]}),"\n",(0,o.jsxs)(n.li,{children:["If you want to have the device act as an access point (a mobile node in your car/truck for example) you can use  ",(0,o.jsx)(n.code,{children:"rnodeconf /dev/ttyACM0 -w --wifi-mode ap --ssid MyMobileWiFi --psk ItReallyIsMadeOfStarStuff"})]}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["Now to configure the rnode interface in your ",(0,o.jsx)(n.code,{children:"~/.reticulum/config"})]}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Add the following to the ",(0,o.jsx)(n.code,{children:"[interfaces]"})," section of your ",(0,o.jsx)(n.code,{children:"~/.reticulum/config"}),", changing the port to match either the IP address or name of your rnode. The ip should be displayed on your rnode if it has a screen."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"  [[rnode]]\n    type = RNodeInterface\n    interface_enabled = true \n    port = tcp://rnodeD45D.local # for a wifi node, or the path to your usb or bluetooth device e.g. /dev/ttyACM0 or ble://rnoded45d\n    frequency = 914875000\n    bandwidth = 125000\n    txpower = 22\n    spreadingfactor = 8\n    codingrate = 5\n    name = rnode\n    selected_interface_mode = 1\n    configured_bitrate = None\n\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsxs)(n.li,{children:["Restart RNSd. If you previously setup a systemd file, you can run ",(0,o.jsx)(n.code,{children:"sudo systemctl restart rnsd"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var i=t(6540);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);