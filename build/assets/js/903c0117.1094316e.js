"use strict";(globalThis.webpackChunkmichmesh=globalThis.webpackChunkmichmesh||[]).push([[395],{5702(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"Reticulum/Services","title":"Services","description":"What good is a network without services?","source":"@site/docs/04-Reticulum/03-Services.md","sourceDirName":"04-Reticulum","slug":"/Reticulum/Services","permalink":"/docs/Reticulum/Services","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Common Services"},"sidebar":"tutorialSidebar","previous":{"title":"RNode","permalink":"/docs/Reticulum/RNode"},"next":{"title":"Beta Script","permalink":"/docs/Reticulum/beta_script"}}');var s=t(4848),r=t(8453);const o={sidebar_label:"Common Services",description:void 0},l="Services",c={},a=[{value:"Distribution Groups",id:"Distribution-Groups",level:3},{value:"Weather Bot",id:"Weather-Bot",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"Services",children:"Services"})}),"\n",(0,s.jsx)(n.p,{children:"What good is a network without services?"}),"\n",(0,s.jsx)(n.h3,{id:"Distribution-Groups",children:"Distribution Groups"}),"\n",(0,s.jsx)(n.p,{children:"If we want to chat with more than one person at a time, we need to setup a Distribution Group. To set up your own DG, do the following:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Clone the repo: ",(0,s.jsx)(n.code,{children:"mkdir -p ~/src/ ; git clone https://github.com/SebastianObi/LXMF-Tools.git ~/src/LXMF-Tools"})]}),"\n",(0,s.jsxs)(n.li,{children:["Copy ",(0,s.jsx)(n.code,{children:"LXMF-Tools/lxmf_distribution_group_extended/lxmf_distribution_group_extended.py"})," to your ",(0,s.jsx)(n.code,{children:"reticulum/bin"})," dir with the name of your dg. ",(0,s.jsx)(n.code,{children:"cp ~/src/LXMF-Tools/lxmf_distribution_group_extended/lxmf_distribution_group_extended.py ~/reticulum/bin/My_DG.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Make it executable. ",(0,s.jsx)(n.code,{children:"chmod 755 ~/reticulum/bin/My_DG.py"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run it once to create the needed config/itentities. ",(0,s.jsx)(n.code,{children:"~/reticulum/bin/My_DG.py"})," - you may need to ctrl-c to stop it after it creates it's files."]}),"\n",(0,s.jsxs)(n.li,{children:["Create an override config at ",(0,s.jsx)(n.code,{children:"~/.config/My_DG/config.cfg.owr"}),", us this as a template:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[main]\nlng = en # en/de\n[lxmf]\ndisplay_name = My Distribution Group\npropagation_node_auto = False\npropagation_node = bb5920b34312ed57265dd173ec5171ad\n[telemetry]\nlocation_enabled = False\nlocation_lat = 0\nlocation_lon = 0\nowner_enabled = False\nowner_data = \nstate_enabled = False\nstate_data = 0\n[cluster]\nenabled = False\nname = grp\ntype = cluster\ndisplay_name = USA/Michigan\n[router]\nenabled = False\ndisplay_name = USA,USA/Michigan\n[high_availability]\nenabled = False\nrole = master\npeer = \n[statistic]\nenabled = False\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["Create ",(0,s.jsx)(n.code,{children:"/etc/systemd/system/My_DG.service"})," to more easily manage starting/stoping/auto-start the DG."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Unit]\nDescription=My LXMF Distribution Group\nAfter=multi-user.target\n\n[Service]\nType=simple\nRestart=always\nRestartSec=3\nUser=YOURUSERNAME\nExecStart=/home/YOURUSERNAME/reticulum/bin/python3 /home/YOURUSERNAME/reticulum/bin/My_DG.py\n\n[Install]\nWantedBy=multi-user.target\n\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"7",children:["\n",(0,s.jsxs)(n.li,{children:["Start the service to make sure it's working. ",(0,s.jsx)(n.code,{children:"sudo systemctl start My_DG.service"})]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If there is an error in the service file, you will need to let systemd know when you've updated the .service file. You do this by running ",(0,s.jsx)(n.code,{children:"sudo systemctl daemon-reload"})]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"8",children:["\n",(0,s.jsxs)(n.li,{children:["If the service is running, you can enable automatic startup by running ",(0,s.jsx)(n.code,{children:"sudo systemctl enable My_DG"})]}),"\n",(0,s.jsx)(n.li,{children:"Logs"}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If you want to see the dg logs, you can check them with ",(0,s.jsx)(n.code,{children:"sudo journalctl -u My_DG"})]}),"\n",(0,s.jsxs)(n.li,{children:["if you want to follow thte logs, you can do that with ",(0,s.jsx)(n.code,{children:"sudo journalctl -fu My_DG"})]}),"\n",(0,s.jsxs)(n.li,{children:["If you want to trim all logs older than 1 week, you can run ",(0,s.jsx)(n.code,{children:"sudo journalctl --vacuum-time=7d"})," to clean all logs older than 7 days, or ",(0,s.jsx)(n.code,{children:"sudo journalctl --vacuum-time=7d -fu My_DG"})," the clear only the logs older than 7d for ",(0,s.jsx)(n.code,{children:"My_DG"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"Weather-Bot",children:"Weather Bot"}),"\n",(0,s.jsx)(n.p,{children:"A bot that fetches the weather for your area, as well as grabbing live satellite images for your area."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"mkdir -p ~/src/ ; git clone https://github.com/DayleDrinkwater/LXMF-WX-Bot.git ~/src/LXMF-WX-Bot"})}),"\n",(0,s.jsxs)(n.li,{children:["Edit ",(0,s.jsx)(n.code,{children:"wxbot.py"}),", comment out/copy to a new line the ",(0,s.jsx)(n.code,{children:"bot ="})," definition and add your own name. for example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"#bot = LXMFBot(\"Weather Bot - Send 'Help' for more info\",announce=36000)\nbot = LXMFBot(\"My Weather Bot - Send 'Help' for more info\",announce=3600)\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Create ",(0,s.jsx)(n.code,{children:"/etc/systemd/system/wxbot.service"})," to more easily manage starting/stoping/auto-start the wxbot."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Unit]\nDescription=LXMF WXbot\nAfter=multi-user.target\n\n[Service]\nType=simple\nRestart=always\nRestartSec=3\nUser=YOURUSERNAME\nExecStart=/home/YOURUSERNAME/reticulum/bin/python3 /home/YOURUSERNAME/src/LXMF-WX-Bot/wxbot.py\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Start the service to make sure it's working. ",(0,s.jsx)(n.code,{children:"sudo systemctl start wxbot.service"})]}),"\n"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If there is an error in the service file, you will need to let systemd know when you've updated the .service file. You do this by running ",(0,s.jsx)(n.code,{children:"sudo systemctl daemon-reload"})]}),"\n"]}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["If the service is running, you can enable automatic startup by running ",(0,s.jsx)(n.code,{children:"sudo systemctl enable wxbot"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);